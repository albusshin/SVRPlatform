package com.SVRPlatform.action;

import java.util.List;

import com.SVRPlatform.constants.Constants;
import com.SVRPlatform.data.CommentData;
import com.SVRPlatform.data.VulnerabilityCommentsData;
import com.SVRPlatform.service.VulnerabilityCommentsDisplayService;
import com.opensymphony.xwork2.ActionSupport;

public class DisplayVulnerabilityComments extends ActionSupport {
	private static final long serialVersionUID = 1L;
	private VulnerabilityCommentsDisplayService vulnerabilityCommentsDisplayService;
	private String strVulnerabilityNumber;
	private String strCommentsAmount;
	private String strNowPage;
	private String strStat;
	private List<CommentData> commentData;

	public VulnerabilityCommentsDisplayService getVulnerabilityCommentsDisplayService() {
		return vulnerabilityCommentsDisplayService;
	}

	public void setVulnerabilityCommentsDisplayService(
			VulnerabilityCommentsDisplayService vulnerabilityCommentsDisplayService) {
		this.vulnerabilityCommentsDisplayService = vulnerabilityCommentsDisplayService;
	}

	public String getStrVulnerabilityNumber() {
		return strVulnerabilityNumber;
	}

	public void setStrVulnerabilityNumber(String strVulnerabilityNumber) {
		this.strVulnerabilityNumber = strVulnerabilityNumber;
	}

	public List<CommentData> getCommentData() {
		return commentData;
	}

	public void setCommentData(List<CommentData> commentData) {
		this.commentData = commentData;
	}

	public String getStrStat() {
		return strStat;
	}

	public void setStrStat(String strStat) {
		this.strStat = strStat;
	}

	private String message;

	public String getMessage() {
		return message;
	}

	public void setMessage(String message) {
		this.message = message;
	}

	public String getStrNowPage() {
		return strNowPage;
	}

	public void setStrNowPage(String strNowPage) {
		this.strNowPage = strNowPage;
	}

	public void setStrCommentsAmount(String strCommentsAmount) {
		this.strCommentsAmount = strCommentsAmount;
	}

	public String getStrCommentsAmount() {
		return strCommentsAmount;
	}

	public String execute() {
		int nowPage = Integer.parseInt(strNowPage);
		if (nowPage < 1) return "error";
		VulnerabilityCommentsData theData = vulnerabilityCommentsDisplayService
				.commentsDispalyService(strVulnerabilityNumber, nowPage, 5);
		commentData = theData.getCommentsData();
		strCommentsAmount = theData.getCommentCount() + "";

		return Constants.SUCCESS;
	}
}
